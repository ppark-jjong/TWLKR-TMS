# 배송 실시간 관제 시스템 통합 명세서 

---

## Ⅰ. 프로젝트 개요 및 목표

| 구분            | 내용                           |
| ------------- | ---------------------------- |
| **실시간 배송 관리** | ETA 기준 주문 조회·상태 관리           |
| **효율적 배차**    | 기사 배정·연락처 관리 일원화             |
| **권한 구분**     | USER / ADMIN 2‑레벨            |
| **UI 범위**     | 한국어, **데스크톱 전용** (모바일 미지원)   |
| **브랜드 컬러**    | `#D72519` (포인트·버튼·링크)        |
| **예상 부하**     | 동시 50 · TPS 100 · ≤ 100 MB/h |
| **렌더링 전략**    | 초기 SSR → 상호작용 CSR(필터·커스터마이징) |

---

## Ⅱ. 아키텍처 원칙 & 기술 스택

### 2.1 핵심 원칙

1. **SSR 우선 + CSR 보조** (SEO·초기 속도 확보)
2. **단일 레코드 = Form(PRG)**, **목록/락 = JSON**
3. **명시적 액션** – 자동화 최소화
4. **YAGNI** – 필요 기능만 구현
5. **서버 최종 검증, 클라이언트 실시간 검증**
6. **UI 일관성** – 상황별 UI/UX 패턴 통일

### 2.2 기술 스택

| 레이어          | 스택                                             |
| ------------ | ---------------------------------------------- |
| **Backend**  | Python 3.12 · FastAPI · Jinja2                 |
| **Frontend** | HTML / CSS / JS (+ Bootstrap·Tailwind 선택)      |
| **Database** | MySQL 8.0 (init‑db.sql)                        |
| **Infra**    | Docker( GAE Flexible ) · Cloud SQL(Private IP) |

## 보안 & 기타 운영 설정

- **HSTS**, **X‑Content‑Type‑Options**, **X‑Frame‑Options** 기본 적용.
- 쿠키 SameSite =Lax 로 CSRF 기본 방어, Ajax PUT 미사용.
- **Private IP** 연결 + Cloud SQL AuthProxy(로컬).
- 모든 시간 KST(UTC+9), 포맷 `YYYY‑MM‑DD HH:MM`.

---

## Ⅷ. 개발 · 배포 지침

| 항목     | 지침                                         |
| ------ | ------------------------------------------ |
| 로컬     | Windows + PowerShell + Cursor 편집기          |
| 컨테이너   | 단일 Dockerfile, 헬스체크 1 회                    |
| 환경 변수  | 비밀 값은 GCP Secret Manager, 나머지는 `.env`      |
| 재시도 로직 | 자동 재시도 금지 – 사용자 수동 재시도만                    |
| 공통 유틸  | `/static/js/utils.js` – 우편번호, 날짜, 알림 함수 집약 |
