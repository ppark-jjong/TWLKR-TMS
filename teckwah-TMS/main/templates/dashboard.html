{% extends "base.html" %}

{% block title %}대시보드 - Teckwah TMS{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', path='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-page">
    <div class="main-card">
        <!-- 필터 헤더 영역 -->
        <div class="filter-header">
            <div class="date-filter-container">
                <div class="date-input-group">
                    <input type="date" id="startDate" class="date-input">
                    <span class="date-separator">~</span>
                    <input type="date" id="endDate" class="date-input">
                </div>
                <button class="btn primary-btn" id="searchDateBtn">
                    <i class="fa-solid fa-search"></i> 조회
                </button>
                <button class="btn secondary-btn" id="todayBtn">
                    <i class="fa-solid fa-calendar-day"></i> 오늘
                </button>
                
                <div class="page-size-selector">
                    <span>표시 행 수:</span>
                    <select id="pageSize" class="select-field">
                        <option value="10" selected>10행</option>
                        <option value="30">30행</option>
                        <option value="50">50행</option>
                    </select>
                </div>
            </div>

            <div class="search-container">
                <input type="text" id="searchOrderNo" class="search-input" placeholder="주문번호 검색">
                <button class="btn search-button" id="searchOrderBtn">
                    <i class="fa-solid fa-search"></i>
                </button>
            </div>
        </div>

        <!-- 필터 영역 -->
        <div class="filter-box">
            <div class="filter-controls">
                <div class="filter-item">
                    <label for="statusFilter">상태</label>
                    <select id="statusFilter" class="filter-select">
                        <option value="">전체</option>
                        <option value="WAITING">대기</option>
                        <option value="IN_PROGRESS">진행</option>
                        <option value="COMPLETE">완료</option>
                        <option value="ISSUE">이슈</option>
                        <option value="CANCEL">취소</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="departmentFilter">부서</label>
                    <select id="departmentFilter" class="filter-select">
                        <option value="">전체</option>
                        <option value="CS">CS</option>
                        <option value="HES">HES</option>
                        <option value="LENOVO">LENOVO</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="warehouseFilter">창고</label>
                    <select id="warehouseFilter" class="filter-select">
                        <option value="">전체</option>
                        <option value="SEOUL">서울</option>
                        <option value="BUSAN">부산</option>
                        <option value="GWANGJU">광주</option>
                        <option value="DAEJEON">대전</option>
                    </select>
                </div>
            </div>

            <div class="filter-actions">
                <button class="btn primary-btn" id="applyFilterBtn">
                    <i class="fa-solid fa-filter"></i> 필터 적용
                </button>
                <button class="btn secondary-btn" id="resetFilterBtn">
                    <i class="fa-solid fa-rotate-left"></i> 초기화
                </button>
            </div>
        </div>

        <!-- 액션 버튼 -->
        <div class="action-buttons">
            <button class="btn primary-btn" id="refreshBtn">
                <i class="fa-solid fa-arrows-rotate"></i> 새로고침
            </button>
            <a href="/orders/create" class="btn primary-btn">
                <i class="fa-solid fa-plus"></i> 신규 등록
            </a>
        </div>

        <!-- 요약 카드 영역 -->
        <div class="summary-cards">
            <div class="summary-card">
                <div class="summary-icon total-icon">
                    <i class="fa-solid fa-list-check"></i>
                </div>
                <div class="summary-data">
                    <p class="summary-label">총 건수</p>
                    <h3 class="summary-value" id="totalOrders">0건</h3>
                </div>
            </div>

            <div class="summary-card">
                <div class="summary-icon waiting-icon">
                    <i class="fa-solid fa-clock"></i>
                </div>
                <div class="summary-data">
                    <p class="summary-label">대기</p>
                    <h3 class="summary-value" id="pendingOrders">0건</h3>
                </div>
            </div>

            <div class="summary-card">
                <div class="summary-icon progress-icon">
                    <i class="fa-solid fa-spinner"></i>
                </div>
                <div class="summary-data">
                    <p class="summary-label">진행</p>
                    <h3 class="summary-value" id="progressOrders">0건</h3>
                </div>
            </div>

            <div class="summary-card">
                <div class="summary-icon complete-icon">
                    <i class="fa-solid fa-check-circle"></i>
                </div>
                <div class="summary-data">
                    <p class="summary-label">완료</p>
                    <h3 class="summary-value" id="completedOrders">0건</h3>
                </div>
            </div>

            <div class="summary-card">
                <div class="summary-icon issue-icon">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                </div>
                <div class="summary-data">
                    <p class="summary-label">이슈+취소</p>
                    <h3 class="summary-value" id="otherOrders">0건</h3>
                </div>
            </div>
        </div>

        <!-- 데이터 테이블 -->
        <div class="table-container">
            <table class="data-table" id="dashboardTable">
                <thead>
                    <tr>
                        <th class="checkbox-cell">
                            <input type="checkbox" id="selectAll">
                        </th>
                        <th>주문번호</th>
                        <th>고객</th>
                        <th>유형</th>
                        <th>상태</th>
                        <th>부서</th>
                        <th>창고</th>
                        <th>ETA</th>
                        <th>배송기사</th>
                    </tr>
                </thead>
                <tbody id="dashboardTableBody">
                    <!-- 데이터 로딩 중 또는 데이터 없음 표시 행 -->
                    <tr class="empty-data-row">
                        <td colspan="9" class="empty-table">
                            <div class="loading-placeholder">
                                <i class="fa-solid fa-spinner loading-spinner"></i>
                                <div>데이터를 불러오는 중...</div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 페이지네이션 -->
        <div class="pagination" id="pagination">
            <button class="page-btn" data-page="prev">
                <i class="fa-solid fa-chevron-left"></i>
            </button>
            <span class="page-info" id="pageInfo">1 / 1</span>
            <button class="page-btn" data-page="next">
                <i class="fa-solid fa-chevron-right"></i>
            </button>
        </div>

        <!-- 로딩 오버레이 -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-content">
                <i class="fa-solid fa-spinner loading-spinner"></i>
                <span>데이터를 불러오는 중...</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block page_js %}
<script src="{{ url_for('static', path='js/dashboard.js') }}"></script>
{% endblock %}
